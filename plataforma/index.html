<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description" content="Ajude Forence a recuperar pacotes perdidos nas nuvens neste jogo de plataforma desafiador!" />
  <title>Computa√ß√£o Forence ‚Äî Salvamento nas Nuvens</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üëæ</text></svg>" />
</head>
<body>
  <!-- Efeito de sobreposi√ß√£o CRT para dar um toque retr√¥ -->
  <div id="crt-overlay"></div>
  
  <!-- Part√≠culas de fundo din√¢micas -->
  <div id="particles-js"></div>
  
  <div class="frame">
    <header class="hud">
      <div class="hud-left">
        <div class="brand glitch" data-text="COMPUTA√á√ÉO FORENCE">COMPUTA√á√ÉO FORENCE</div>
        <div class="subtitle">Salvamento nas Nuvens ¬∑ Plataformas ¬∑ Recuperar Pacotes</div>
      </div>
      <div class="hud-right">
        <div class="score">
          <span class="icon">üèÜ</span>
          <span id="score">0</span> pts
        </div>
        <div class="level">
          <span class="icon">üì¶</span>
          <span id="collected">0</span>/<span id="goal">10</span>
        </div>
      </div>
    </header>

    <main id="game" class="game">
      <!-- Tela de inicializa√ß√£o -->
      <div class="boot" id="boot">
        <div class="logo">
          <div class="logo-text">FORENCE</div>
          <div class="logo-subtext">SALVAMENTO NAS NUVENS</div>
        </div>
        
        <div class="terminal">
          <div class="terminal-header">
            <span class="terminal-btn red"></span>
            <span class="terminal-btn yellow"></span>
            <span class="terminal-btn green"></span>
            <span class="terminal-title">console_forence.exe</span>
          </div>
          <pre class="type">
<span class="highlight">Iniciando console Forence v2.0...</span>
<span class="highlight">Modo: SALVAMENTO NAS NUVENS</span>

> Carregando recursos... <span class="success">[OK]</span>
> Verificando controles... <span class="success">[OK]</span>
> Inicializando f√≠sica... <span class="success">[OK]</span>

<span class="highlight">OBJETIVO PRINCIPAL:</span>
Ajude Forence a pular pelas plataformas e recuperar pacotes perdidos nas nuvens.

<span class="highlight">CONTROLES:</span>
‚Üê ‚Üí ou A/D: Mover
ESPA√áO ou SETA ‚Üë: Pular
R: Reiniciar n√≠vel
M: Alternar m√∫sica

> Pressione <span class="highlight">ESPA√áO</span> ou clique em <span class="highlight">INICIAR</span> para come√ßar.
          </pre>
        </div>
        
        <div class="btn-group">
          <button class="btn pulse" id="startBtn">
            <span class="btn-text">INICIAR</span>
            <span class="btn-icon">‚ñ∂</span>
          </button>
        </div>
        
        <div class="credits">
          <p>Desenvolvido com ‚ù§Ô∏è por <span class="highlight">Forence Team</span> | 2025</p>
        </div>
      </div>
      
      <!-- Canvas do jogo -->
      <canvas id="gameCanvas" width="800" height="480" style="display:none"></canvas>
      
      <!-- Controles para dispositivos m√≥veis -->
      <div class="mobile-controls" id="mobileControls">
        <div class="d-pad">
          <button class="mc-btn" id="btnLeft" aria-label="Mover para esquerda" ontouchstart="handleTouchStart(event, 'left')" ontouchend="handleTouchEnd(event, 'left')">‚óÄ</button>
          <button class="mc-btn" id="btnRight" aria-label="Mover para direita" ontouchstart="handleTouchStart(event, 'right')" ontouchend="handleTouchEnd(event, 'right')">‚ñ∂</button>
        </div>
        <button class="mc-btn btn-jump" id="btnJump" aria-label="Pular" ontouchstart="handleTouchStart(event, 'jump')" ontouchend="handleTouchEnd(event, 'jump')">‚§í</button>
      </div>
      
      <!-- √Årea de toque para pulo alternativo (lado esquerdo da tela) -->
      <div id="touchAreaLeft" style="position: fixed; top: 0; left: 0; width: 50%; height: 100%; z-index: 999; display: none;"></div>
      
      <!-- √Årea de toque para pulo alternativo (lado direito da tela) -->
      <div id="touchAreaRight" style="position: fixed; top: 0; right: 0; width: 50%; height: 100%; z-index: 999; display: none;"></div>
    </main>

    <footer class="console">
      <div id="dialog" class="dialog">
        <span class="cursor">></span> 
        <span class="typing-text">Sistema inicializado. Aguardando comandos...</span>
      </div>
      <div class="tips">
        <span class="icon">üí°</span>
        <span id="hint">Dica: Colete todos os pacotes para avan√ßar para o pr√≥ximo n√≠vel!</span>
      </div>
    </footer>

    <!-- Bot√£o de mudo com efeito de brilho -->
    <button id="muteToggle" class="mute shine" aria-label="Alternar som" title="Alternar som">
      <span class="mute-icon">üîä</span>
      <span class="mute-text">SOM LIGADO</span>
    </button>
    
    <!-- Efeito de confete para vit√≥ria -->
    <div id="confetti" class="confetti"></div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="script.js"></script>
  <script>
    // Fun√ß√µes para controles touch
    function handleTouchStart(e, action) {
      e.preventDefault();
      const event = new KeyboardEvent('keydown', {
        key: action === 'left' ? 'ArrowLeft' : action === 'right' ? 'ArrowRight' : ' ',
        code: action === 'left' ? 'ArrowLeft' : action === 'right' ? 'ArrowRight' : 'Space',
        keyCode: action === 'left' ? 37 : action === 'right' ? 39 : 32,
        which: action === 'left' ? 37 : action === 'right' ? 39 : 32,
        bubbles: true
      });
      window.dispatchEvent(event);
    }

    function handleTouchEnd(e, action) {
      e.preventDefault();
      const event = new KeyboardEvent('keyup', {
        key: action === 'left' ? 'ArrowLeft' : action === 'right' ? 'ArrowRight' : ' ',
        code: action === 'left' ? 'ArrowLeft' : action === 'right' ? 'ArrowRight' : 'Space',
        keyCode: action === 'left' ? 37 : action === 'right' ? 39 : 32,
        which: action === 'left' ? 37 : action === 'right' ? 39 : 32,
        bubbles: true
      });
      window.dispatchEvent(event);
    }

    // Detectar dispositivo m√≥vel
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    // Configurar controles baseado no dispositivo
    document.addEventListener('DOMContentLoaded', () => {
      if (isMobile) {
        // Ativar √°reas de toque alternativas
        const touchAreaLeft = document.getElementById('touchAreaLeft');
        const touchAreaRight = document.getElementById('touchAreaRight');
        
        // Mostrar controles m√≥veis apenas em dispositivos m√≥veis
        document.getElementById('mobileControls').style.display = 'flex';
        
        // Configurar √°rea de toque esquerda para movimento
        touchAreaLeft.style.display = 'block';
        touchAreaLeft.addEventListener('touchstart', (e) => {
          handleTouchStart(e, 'left');
        });
        touchAreaLeft.addEventListener('touchend', (e) => {
          handleTouchEnd(e, 'left');
        });
        
        // Configurar √°rea de toque direita para pulo
        touchAreaRight.style.display = 'block';
        touchAreaRight.addEventListener('touchstart', (e) => {
          handleTouchStart(e, 'jump');
        });
        touchAreaRight.addEventListener('touchend', (e) => {
          handleTouchEnd(e, 'jump');
        });
        
        // Prevenir zoom com dois dedos
        document.addEventListener('touchmove', function(e) {
          if (e.scale !== 1) { e.preventDefault(); }
        }, { passive: false });
        
        // Prevenir rolagem da p√°gina
        document.body.style.overflow = 'hidden';
        document.body.style.touchAction = 'manipulation';
      }
      // Inicializa part√≠culas de fundo
      if (typeof particlesJS !== 'undefined') {
        particlesJS('particles-js', {
          particles: {
            number: { value: 80, density: { enable: true, value_area: 800 } },
            color: { value: '#3a86ff' },
            shape: { type: 'circle' },
            opacity: {
              value: 0.5,
              random: true,
              anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false }
            },
            size: {
              value: 3,
              random: true,
              anim: { enable: true, speed: 2, size_min: 0.1, sync: false }
            },
            line_linked: {
              enable: true,
              distance: 150,
              color: '#3a86ff',
              opacity: 0.2,
              width: 1
            },
            move: {
              enable: true,
              speed: 1,
              direction: 'none',
              random: false,
              straight: false,
              out_mode: 'out',
              bounce: false,
              attract: { enable: false, rotateX: 600, rotateY: 1200 }
            }
          },
          interactivity: {
            detect_on: 'canvas',
            events: {
              onhover: { enable: true, mode: 'grab' },
              onclick: { enable: true, mode: 'push' },
              resize: true
            },
            modes: {
              grab: { distance: 140, line_linked: { opacity: 0.5 } },
              push: { particles_nb: 4 }
            }
          },
          retina_detect: true
        });
      }
      
      // Efeito de digita√ß√£o no console
      const dialog = document.querySelector('.typing-text');
      if (dialog) {
        const text = dialog.textContent;
        dialog.textContent = '';
        let i = 0;
        const speed = 20;
        
        function typeWriter() {
          if (i < text.length) {
            dialog.textContent += text.charAt(i);
            i++;
            setTimeout(typeWriter, speed);
          }
        }
        
        setTimeout(typeWriter, 1000);
      }
    });
  </script>
</body>
</html>
